<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>NutriKids - Card√°pios</title>
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>

<header>
  <h1>üçè NutriKids</h1>
  <nav>
    <a href="/">In√≠cio</a>
    <a href="/cardapio">Card√°pios</a>
  </nav>
</header>

<main>

  <section>
    <h2><%= editar ? "Editar Card√°pio" : "Cadastro de Card√°pio" %></h2>

    <% if (typeof error !== "undefined") { %>
      <div class="alert"><%= error %></div>
    <% } %>

    <form action="<%= editar ? `/cardapio/editar/${cardapio.id}` : '/cardapio/novo' %>" method="POST">

      <label>Nome</label>
      <input type="text" name="nome" value="<%= editar ? cardapio.nome : '' %>" required />

      <label>Descri√ß√£o</label>
      <input type="text" name="descricao" value="<%= editar ? cardapio.descricao : '' %>" required />

      <label>Calorias</label>
      <input type="number" name="calorias" value="<%= editar ? cardapio.calorias : '' %>" required />

      <label>Data</label>
      <input type="date" name="data_cardapio" 
        value="<%= editar ? cardapio.data.toISOString().substring(0,10) : '' %>"
        required />

      <button type="submit"><%= editar ? 'Salvar Altera√ß√µes' : 'Salvar Card√°pio' %></button>
    </form>
  </section>

  <section style="margin-top: 40px;">
    <h3>Card√°pios Cadastrados</h3>

    <table>
      <tr>
        <th>Nome</th>
        <th>Descri√ß√£o</th>
        <th>Calorias</th>
        <th>Data</th>
        <th>A√ß√µes</th>
      </tr>

      <% cardapios.forEach(c => { %>
        <tr>
          <td><%= c.nome %></td>
          <td><%= c.descricao %></td>
          <td><%= c.calorias %></td>
          <td><%= new Date(c.data).toLocaleDateString("pt-BR") %></td>
          <td>
            <a class="btn-edit" href="/cardapio/editar/<%= c.id %>">Editar</a>
            <form action="/cardapio/excluir/<%= c.id %>" method="POST" style="display:inline;">
              <button class="btn-delete" type="submit">Excluir</button>
            </form>
          </td>
        </tr>
      <% }) %>

    </table>
  </section>

</main>

<footer>
  <p>&copy; <%= new Date().getFullYear() %> NutriKids</p>
</footer>

</body>
</html>
